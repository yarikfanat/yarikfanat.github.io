var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Passport(e){return React.createElement("div",{className:"passe-partout",onClick:function(t){e.ClickPhoto(e.indexLevel,t.clientX,t.clientY)}},e.children)}function BlockExercise(e){return React.createElement("div",{className:"block_main_ex"},e.children)}function Equipments(e){return React.createElement("div",{className:"equipment"},e.children)}function WrapColumn(e){return React.createElement("div",{className:"wrap_column"},e.children)}function MainExercise(e){var t=e.indexLevel;return React.createElement("div",{className:"exercise_name",onClick:function(){e.ShowPhoto(t,e.complex_photos[0],e.complex_details[0],e.src_video[0])}},e.children)}function AddExercise(e){var t=e.level,o=e.number,a=e.animation,i=e.last;return"hide"==a?React.createElement("li",{onAnimationEnd:i?function(){e.DeleteMoreExercises(t)}:null,className:"animation_lists_hide"},e.children):React.createElement("li",{className:"animation_lists_show",onClick:function(){e.ShowPhoto(t,e.complex_photos[o],e.complex_details[o],e.src_video[o])}},e.children)}function AlternativeExercises(e){var t=e.indexLevel,o=e.animation,a=e.exercises,i=0,s=a.length-1,n=a.map((function(a){var n=function(e){for(var t=0,o=0;o<e.length;o++)t+=e.charCodeAt(o);return t.toString()}(a);return React.createElement(AddExercise,{last:i==s,level:t,number:i++,animation:o,DeleteMoreExercises:e.DeleteMoreExercises,ShowPhoto:e.ShowPhoto,src_video:e.src_video,complex_photos:e.complex_photos,complex_details:e.complex_details,key:n},a)}));return n.splice(0,1),React.createElement("ul",{className:"list_exercise"},n)}function CreateTrainComponents(e){var t,o=[],a=[],i=e.complex,s=e.photos,n=e.details,r=e.buttonShow,l=e.moreExercises,c=0;s.map((function(o,s){var h=React.createElement(Passport,{ClickPhoto:e.ClickPhoto,indexLevel:s},React.createElement("img",{src:o,className:"photo_equip"}),React.createElement("div",{className:"info"},n[s].rounds,"x",n[s].reps)),u=React.createElement(BlockExercise,null,React.createElement(ButtonShow,{onButtonShowHadler:e.onButtonShowHadler,indexLevel:s},r[s]),React.createElement(MainExercise,{ShowPhoto:e.ShowPhoto,src_video:i.src_video[s],complex_details:i.details[s],complex_photos:i.photo_equip[s],indexLevel:s},i.exercise_name[s][0]));t=null!=l[s]?React.createElement(AlternativeExercises,{DeleteMoreExercises:e.DeleteMoreExercises,animation:l[s],indexLevel:s,src_video:i.src_video[s],exercises:i.exercise_name[s],ShowPhoto:e.ShowPhoto,complex_details:i.details[s],complex_photos:i.photo_equip[s]}):null,a.push(React.createElement(Equipments,{key:++c},h,u,t))}));var h=null,u=0;return a.map((function(e){++u,h||(h=e),2==u&&(o.push(React.createElement(WrapColumn,{key:++c},h,e)),h=null,u=0)})),h&&o.push(React.createElement(WrapColumn,{key:++c},h)),React.createElement("div",null,o)}var ButtonShow=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.onChangeState=o.onChangeState.bind(o),o}return _inherits(t,React.Component),_createClass(t,[{key:"onChangeState",value:function(e){var t=this.props.indexLevel;this.props.onButtonShowHadler(t)}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("button",{className:"button_list_ex",onClick:this.onChangeState},React.createElement("b",null,this.props.children)))}}]),t}(),HeadBar=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isMsg:null},o.onClickPlay=o.onClickPlay.bind(o),o.WebRTCChat=o.WebRTCChat.bind(o),o}return _inherits(t,React.Component),_createClass(t,[{key:"onClickPlay",value:function(){null==this.props.video?this.setState({isMsg:"Сначала выберите упражнение для просмотра видео"}):""==this.props.video?this.setState({isMsg:"Видеоролик не добавлен администратором"}):this.props.PlayVideo()}},{key:"WebRTCChat",value:function(){this.props.onWebCamera()}},{key:"render",value:function(){var e,t,o=this,a=this.props.player;return e=a?"show"==a?"video_player animation_player_show":"video_player animation_player_hide":"video_player",t="show"==this.props.chat?"container_webcam_on":"container_webcam",React.createElement("div",{className:"header"},""!=this.props.video?React.createElement("iframe",{src:this.props.video,className:e,title:"YouTube video player",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):null,React.createElement("div",{className:"header_back"}),React.createElement("div",{className:"photo_dumbells1"}),React.createElement("div",{className:"photo_dumbells2"}),React.createElement("div",{className:"block_video_btn"}),React.createElement("div",{className:"video_button",onClick:this.onClickPlay}),React.createElement("div",{className:t,onClick:this.WebRTCChat}),this.state.isMsg?React.createElement(MessageBox,{type:"alert",effect:"rubberBand",render:function(){o.setState({isMsg:null})},effectOut:"rotateOut"},this.state.isMsg):null)}}]),t}(),ToolTip=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={toolTip:null},o.out=!1,o.tool_class,o.clickHandler=o.clickHandler.bind(o),o.AnimationEnd=o.AnimationEnd.bind(o),o}return _inherits(t,React.Component),_createClass(t,[{key:"AnimationEnd",value:function(){this.out&&this.props.render()}},{key:"componentDidMount",value:function(){this.tool_class="weight animate__animated animate__"+this.props.effect,this.setState({toolTip:!0})}},{key:"clickHandler",value:function(){this.tool_class="weight animate__animated animate__"+this.props.effectOut,this.out=!0,this.setState({toolTip:!0})}},{key:"render",value:function(){return React.createElement("div",null,this.state.toolTip?React.createElement("div",{className:this.tool_class,style:{left:this.props.posX,top:this.props.posY},onClick:this.clickHandler,onAnimationEnd:this.AnimationEnd},React.createElement("div",{className:"weight_text"},this.props.children)):null)}}]),t}(),TrainExercise=function(e){function t(e){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={photos:[],buttonShow:[],moreExercises:[],details:[],video:null,player:null,chat:null,headBarVisible:!0,toolTip:!1},o.arrayVideo=[],o.posX,o.posY,o.onButtonShowHadler=o.onButtonShowHadler.bind(o),o.onChatHandler=o.onChatHandler.bind(o),o.DeleteMoreExercises=o.DeleteMoreExercises.bind(o),o.ShowPhoto=o.ShowPhoto.bind(o),o.PlayVideo=o.PlayVideo.bind(o),o.ClickPhoto=o.ClickPhoto.bind(o),o.setVisibleHeadBar=o.setVisibleHeadBar.bind(o),o}return _inherits(t,React.Component),_createClass(t,[{key:"setVisibleHeadBar",value:function(e){this.setState({headBarVisible:e})}},{key:"onChatHandler",value:function(){var e=this.state.chat;e=null==e||"hide"==e?"show":"hide",this.setState({chat:e})}},{key:"ClickPhoto",value:function(e,t,o){var a,i=this.arrayVideo[e];this.posX=t-100,this.posY=o-75,a=""!=i,this.setState({video:i,toolTip:a})}},{key:"PlayVideo",value:function(){this.state.video;var e=this.state.player;e=null==e||"hide"==e?"show":"hide",this.setState({player:e})}},{key:"ShowPhoto",value:function(e,t,o,a){var i=this.state.photos,s=this.state.details;i[e]=t,s[e]=o,this.arrayVideo[e]=a,this.setState({photos:i,details:s,video:a})}},{key:"DeleteMoreExercises",value:function(e){var t=this.state.moreExercises,o=this.state.photos,a=this.state.details,i=this.props.complex;t[e]=null,o[e]=i.photo_equip[e][0],a[e]=i.details[e][0],this.setState({photos:o,moreExercises:t,details:a})}},{key:"onButtonShowHadler",value:function(e){var t=this.state.buttonShow,o=this.state.moreExercises;"-"==t[e]?(t[e]="+",o[e]="hide"):(t[e]="-",o[e]="show"),this.setState({buttonShow:t,moreExercises:o})}},{key:"componentDidMount",value:function(){var e=this,t=[],o=[],a=[],i=this.props.complex,s=i.photo_equip.map((function(s,n){return t.push("+"),o.push(null),a.push(i.details[n][0]),e.arrayVideo.push(i.src_video[n][0]),s[0]}));this.setState({photos:s,buttonShow:t,moreExercises:o,details:a})}},{key:"render",value:function(){var e=this,t=this.props.complex,o=this.props.user_name,a=this.state.photos,i=this.state.video,s=this.state.buttonShow,n=this.state.moreExercises,r=this.state.details,l=this.state.player,c=this.state.chat;return React.createElement("div",null,this.state.headBarVisible?React.createElement(HeadBar,{chat:c,video:i,player:l,PlayVideo:this.PlayVideo,onWebCamera:this.onChatHandler}):null,React.createElement("div",{className:"full_wrap"},React.createElement(ChatContainer,{chat:c,user_name:o,headBarVisible:this.setVisibleHeadBar,isHeadBarVisible:this.state.headBarVisible}),React.createElement(CreateTrainComponents,{DeleteMoreExercises:this.DeleteMoreExercises,onButtonShowHadler:this.onButtonShowHadler,moreExercises:n,buttonShow:s,photos:a,complex:t,ShowPhoto:this.ShowPhoto,details:r,ClickPhoto:this.ClickPhoto}),React.createElement("div",{className:"empty"})),this.state.toolTip?React.createElement(ToolTip,{posX:this.posX,posY:this.posY,effect:"heartBeat",effectOut:"zoomOut",render:function(){e.setState({toolTip:!1})}},"Для просмотра ролика нажмите кинокамеру"):null)}}]),t}();